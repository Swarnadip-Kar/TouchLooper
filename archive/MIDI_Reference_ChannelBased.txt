# LoopGrid - Channel-Based MIDI Mapping Reference

## CRITICAL: NO MORE NOTE CONFLICTS!

This version uses **MIDI Channels** to separate tracks, with **Control Change (CC) messages** 
instead of notes. This completely eliminates conflicts in Ableton Live.

## Channel Assignment

| Tab | MIDI Channel | Purpose |
|-----|--------------|---------|
| T1  | Channel 1    | Track 1 controls |
| T2  | Channel 2    | Track 2 controls |
| T3  | Channel 3    | Track 3 controls |
| T4  | Channel 4    | Track 4 controls |
| Global | Channel 5 | Master controls |

---

## Per-Track Controls

**All tracks use the SAME CC numbers, but on DIFFERENT channels**

### Track 1 (Channel 1)

| Control | MIDI Signal | Type | Range |
|---------|-------------|------|-------|
| Play | Ch1, CC 1 | Toggle | 0-127 |
| Stop | Ch1, CC 2 | Push | 0-127 |
| Overdub | Ch1, CC 3 | Toggle | 0-127 |
| Undo | Ch1, CC 4 | Push | 0-127 |
| Clear | Ch1, CC 5 | Push | 0-127 |
| Double | Ch1, CC 6 | Push | 0-127 |
| Volume | Ch1, CC 7 | Fader | 0-127 |
| Feedback | Ch1, CC 8 | Knob | 0-100 |
| Reverb | Ch1, CC 9 | Knob | 0-127 |
| Delay | Ch1, CC 10 | Knob | 0-127 |

### Track 2 (Channel 2)

| Control | MIDI Signal | Type | Range |
|---------|-------------|------|-------|
| Play | Ch2, CC 1 | Toggle | 0-127 |
| Stop | Ch2, CC 2 | Push | 0-127 |
| Overdub | Ch2, CC 3 | Toggle | 0-127 |
| Undo | Ch2, CC 4 | Push | 0-127 |
| Clear | Ch2, CC 5 | Push | 0-127 |
| Double | Ch2, CC 6 | Push | 0-127 |
| Volume | Ch2, CC 7 | Fader | 0-127 |
| Feedback | Ch2, CC 8 | Knob | 0-100 |
| Reverb | Ch2, CC 9 | Knob | 0-127 |
| Delay | Ch2, CC 10 | Knob | 0-127 |

### Track 3 (Channel 3)

| Control | MIDI Signal | Type | Range |
|---------|-------------|------|-------|
| Play | Ch3, CC 1 | Toggle | 0-127 |
| Stop | Ch3, CC 2 | Push | 0-127 |
| Overdub | Ch3, CC 3 | Toggle | 0-127 |
| Undo | Ch3, CC 4 | Push | 0-127 |
| Clear | Ch3, CC 5 | Push | 0-127 |
| Double | Ch3, CC 6 | Push | 0-127 |
| Volume | Ch3, CC 7 | Fader | 0-127 |
| Feedback | Ch3, CC 8 | Knob | 0-100 |
| Reverb | Ch3, CC 9 | Knob | 0-127 |
| Delay | Ch3, CC 10 | Knob | 0-127 |

### Track 4 (Channel 4)

| Control | MIDI Signal | Type | Range |
|---------|-------------|------|-------|
| Play | Ch4, CC 1 | Toggle | 0-127 |
| Stop | Ch4, CC 2 | Push | 0-127 |
| Overdub | Ch4, CC 3 | Toggle | 0-127 |
| Undo | Ch4, CC 4 | Push | 0-127 |
| Clear | Ch4, CC 5 | Push | 0-127 |
| Double | Ch4, CC 6 | Push | 0-127 |
| Volume | Ch4, CC 7 | Fader | 0-127 |
| Feedback | Ch4, CC 8 | Knob | 0-100 |
| Reverb | Ch4, CC 9 | Knob | 0-127 |
| Delay | Ch4, CC 10 | Knob | 0-127 |

---

## Global Controls (Channel 5)

| Control | MIDI Signal | Type | Range |
|---------|-------------|------|-------|
| Global Play | Ch5, CC 1 | Push | 0-127 |
| Global Stop | Ch5, CC 2 | Push | 0-127 |
| Global Metronome | Ch5, CC 3 | Toggle | 0-127 |
| Metronome Volume | Ch5, CC 4 | Knob | 0-127 |

**Note:** Metronome Volume is SHARED across all tabs (same widget ID).

---

## Tab Touch Events

| Tab | MIDI Signal | Description |
|-----|-------------|-------------|
| T1 | Ch1, CC 20 | Sent when T1 is touched |
| T2 | Ch2, CC 20 | Sent when T2 is touched |
| T3 | Ch3, CC 20 | Sent when T3 is touched |
| T4 | Ch4, CC 20 | Sent when T4 is touched |

---

## Mapping in Ableton Live

### Step 1: Enable All MIDI Channels

1. **Preferences** → **Link/Tempo/MIDI**
2. Find your MIDI input port (e.g., loopMIDI, IAC Driver)
3. Enable **Track** and **Remote**

### Step 2: MIDI Map Mode

1. Click **MIDI** button (top-right) to enter MIDI Map Mode
2. Ableton will now show which channel/CC each control uses

### Step 3: Map Track 1

1. Click **Looper Play** button on Track 1
2. Press **Play button** on T1 tab → Sends Ch1, CC1
3. Click **Looper Stop** button
4. Press **Stop button** on T1 tab → Sends Ch1, CC2
5. Click **Looper Overdub** button
6. Press **Overdub button** on T1 tab → Sends Ch1, CC3

Continue for all controls...

### Step 4: Repeat for Other Tracks

Track 2 will use Channel 2, Track 3 uses Channel 3, etc.
The CC numbers stay the same (Play = CC1, Stop = CC2), just different channels.

### Step 5: Map Global Controls

Map global controls to Ableton's master functions:
- Global Play (Ch5, CC1) → Master Play button
- Global Stop (Ch5, CC2) → Master Stop button

---

## Why This Works Better

### Previous Issue (Note-Based)
- All tracks used Channel 1 with different notes
- Notes 60-83 for different functions
- Ableton sometimes confused similar note values
- Hard to remember which note does what

### New Solution (Channel-Based CC)
- Each track has its own MIDI channel
- Same CC numbers across tracks (easy to remember)
- **No conflicts possible** - different channels = different signals
- More intuitive: Channel 1 = Track 1, Channel 2 = Track 2

### Example of No Conflicts:
- Track 1 Play: Ch1, CC1
- Track 2 Play: Ch2, CC1
- Track 3 Play: Ch3, CC1
- Track 4 Play: Ch4, CC1

All use "CC1", but on different channels, so Ableton sees them as completely separate!

---

## Troubleshooting

### Problem: Still getting conflicts

**Solution:**
- Make sure you've cleared ALL old MIDI mappings in Ableton
- Click **MIDI** → Right-click mapping → **Delete**
- Restart Ableton and re-map with new file

### Problem: Controls not responding

**Solution:**
- Check that your MIDI input accepts all channels (not just Channel 1)
- In Ableton Preferences, verify "Track" is enabled
- Use MIDI monitor to verify signals are being sent

### Problem: Can't distinguish channels in Ableton

**Solution:**
- When in MIDI Map Mode, Ableton shows "Ch1.CC1", "Ch2.CC1" etc.
- If it only shows "CC1", your MIDI port might be filtering channels
- Try a different virtual MIDI port

---

## Quick Reference Table

| What You Want | Tab | Press This | Sends |
|---------------|-----|------------|-------|
| Start Track 1 loop | T1 | Play | Ch1, CC1 |
| Stop Track 1 | T1 | Stop | Ch1, CC2 |
| Start Track 2 loop | T2 | Play | Ch2, CC1 |
| Stop all tracks | Any | Global Stop | Ch5, CC2 |
| Adjust Track 3 volume | T3 | Volume fader | Ch3, CC7 |
| Change metronome volume | Any | Metro knob | Ch5, CC4 |

---

**File:** LoopGrid_ChannelBased_Complete.json
**Version:** 2.0 (Channel-Based)
**Date:** 2026-01-13
